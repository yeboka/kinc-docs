---
sidebar_position: 4
---
# Table

## Описание

Компонент **CustomTable** представляет собой таблицу с поддержкой сортировки, пагинации и удаления записей. Он используется для отображения данных в виде таблицы с настраиваемыми колонками и возможностью взаимодействия с пользователем (например, переход по ссылкам или удаление записей). Таблица также поддерживает фильтрацию и сортировку данных.

## Свойства (Props)

- **columns** (array):  
  Массив объектов, описывающих столбцы таблицы. Каждый объект может содержать:
    - `name`: имя поля, соответствующее данным в строках.
    - `title`: заголовок столбца.
    - `notSortable`: флаг, который определяет, может ли столбец быть отсортирован.
    - `render`: функция для рендеринга данных в ячейке (если она предоставлена).

- **data** (array):  
  Массив данных, который будет отображаться в таблице. Каждая строка должна быть объектом, где ключи соответствуют полям из `columns`.

- **pagination** (object):  
  Объект с информацией о пагинации, содержащий:
    - `current_page`: текущая страница.
    - `last_page`: последняя страница.

- **handlePageSelect** (function, optional):  
  Функция, которая вызывается при изменении страницы пагинации. Если она не передана, используется функция по умолчанию.

- **link** (string, optional):  
  Ссылка для перехода при клике на строку таблицы. Если передана, при клике на строку осуществляется переход на указанную страницу.

- **onRowClick** (function, optional):  
  Функция, вызываемая при клике на строку таблицы. Если она не передана, по умолчанию выполняется переход по ссылке, указанной в `link`.

- **setSortBy** (function, optional):  
  Функция, которая вызывается для обновления состояния сортировки.

- **isDeletable** (boolean, optional):  
  Флаг, определяющий, может ли пользователь удалять записи. Если `true`, отображается кнопка для удаления.

- **handleDelete** (function, optional):  
  Функция, вызываемая при удалении записи.

## Логика компонента

1. **Сортировка**:  
   Компонент позволяет сортировать данные по выбранным столбцам. При клике на заголовок столбца вызывается функция `handleRequestSort`, которая обновляет состояние сортировки и применяет фильтры сортировки к данным.

2. **Пагинация**:  
   Компонент поддерживает пагинацию, позволяя пользователю переключаться между страницами. Пагинация обновляется с помощью функции `handleChangePage`.

3. **Удаление записей**:  
   Если свойство `isDeletable` установлено в `true`, для каждой строки таблицы отображается кнопка удаления, которая вызывает функцию `handleDelete` при клике.

4. **Навигация по строкам**:  
   Если передан параметр `link`, при клике на строку таблицы пользователь будет перенаправлен по указанной ссылке с добавлением ID записи.

## Использование

Пример использования компонента **CustomTable**:


```jsx
import CustomTable from './components/CustomTable';

const columns = [
{ name: 'name', title: 'Имя', notSortable: false },
{ name: 'email', title: 'Email', notSortable: false },
];

const data = [
{ id: 1, name: 'Иван', email: 'ivan@mail.com' },
{ id: 2, name: 'Мария', email: 'maria@mail.com' },
];

function MyPage() {
    const handlePageSelect = (event, newPage) => {
        console.log("Переключение на страницу:", newPage);
    };
    
    const handleDelete = (id) => {
        console.log("Удаление записи с id:", id);
    };
    
    return (
    <CustomTable
        columns={columns}
        data={data}
        pagination={{ current_page: 1, last_page: 3 }}
        handlePageSelect={handlePageSelect}
        link="/detail"
        onRowClick={(row) => console.log(row)}
        isDeletable={true}
        handleDelete={handleDelete}
    />
    );
}
```
## Важные моменты

1. **Сортировка**: Сортировка работает по одному столбцу, и данные обновляются с учетом направления сортировки.
2. **Пагинация**: При изменении страницы обновляется фильтр с новой страницей. Пагинация отображается с кастомными стрелками для переключения страниц.
3. **Удаление**: Для строк с флагом `isDeletable` добавляется кнопка удаления, при клике на которую вызывается `handleDelete`.
4. **Навигация по строкам**: При клике на строку, если указан `link`, происходит переход по этой ссылке, добавляя ID записи к URL.

## Зависимости

- **Material UI**: используется для компонентов таблицы, пагинации и кнопок.
- **Custom Context**: используется контекст `useFilter` для обновления фильтров.

## Стиль

Для стилизации компонента используется **CSS** в файле `table.css`, а также **TailwindCSS** для базовых стилей, таких как отступы, цвета фона и шрифты.

---

Компонент **CustomTable** предоставляет удобный способ отображать таблицы с поддержкой сортировки, пагинации, удаления записей и навигации, делая его подходящим для многих сценариев использования в приложениях.
