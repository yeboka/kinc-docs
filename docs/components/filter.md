---
sidebar_position: 5
---
# Контекст фильтров и компонент Filters

## Описание

Этот контекст и компонент используются для управления фильтрацией данных, отображаемых в таблицах на страницах. С помощью контекста **FilterContext** можно управлять различными фильтрами, такими как статус, тип активности, пользователи и другие параметры, а также обновлять и сбрасывать эти фильтры. Компонент **Filters** предоставляет интерфейс для выбора фильтров и их значений, а также для выбора дат.

## Контекст фильтров

**FilterContext** предоставляет функции для управления состоянием фильтров и их применения на страницах:

- **queryOptions** — объект с текущими фильтрами и параметрами запроса.
- **updateFilter** — функция для обновления значения конкретного фильтра.
- **updateDateFilter** — функция для обновления фильтрации по дате (начальная и конечная даты).
- **resetFilters** — функция для сброса всех фильтров.
- **resetPage** — функция для сброса страницы при изменении фильтров.

### Пример использования контекста:

```jsx
import { useFilter } from "@/context/filter.context";

const MyComponent = () => {
    const { queryOptions, updateFilter, resetFilters } = useFilter();
    
    const handleFilterChange = () => {
        updateFilter("status", "active");
    };
    
    return (
        <div>
            <p>Текущий статус: {queryOptions.status}</p>
            <button onClick={handleFilterChange}>Обновить статус</button>
            <button onClick={resetFilters}>Сбросить фильтры</button>
        </div>
    );
};
```

## Компонент Filters

Компонент **Filters** предоставляет интерфейс для выбора фильтров, которые могут включать фильтрацию по статусу, типу активности, пользователям и диапазонам дат. Он взаимодействует с контекстом **FilterContext**, обновляя параметры фильтрации и отображая их в UI.

### Свойства (Props):

- **elementCount** (number):  
  Количество элементов, отображаемых на текущей странице.

- **filterOptions** (array):  
  Массив фильтров, которые будут отображаться на странице. Например, статус, тип активности, пользователи и т.д.

- **showElements** (boolean, optional):  
  Флаг, который указывает, показывать ли количество элементов.

- **withDate** (boolean, optional):  
  Флаг, который определяет, показывать ли возможность фильтрации по датам.

- **sortBy** (string):  
  Параметр сортировки, который используется для отображения информации о текущей сортировке.

- **userSelect** (boolean, optional):  
  Флаг, который указывает, отображать ли фильтр для выбора пользователей.

### Логика компонента:

1. **Фильтрация по датам**:  
   Компонент предоставляет возможность фильтровать данные по датам, где можно выбрать диапазон дат, или использовать предустановленные фильтры для последнего месяца или года.

2. **Обновление фильтров**:  
   Когда пользователь выбирает фильтры, они обновляются через контекст **FilterContext** с помощью функции `updateFilter` или `updateDateFilter`.

3. **Рендеринг фильтров**:  
   Компонент динамически отображает соответствующие элементы фильтров в зависимости от переданных свойств (`filterOptions`, `showElements` и т.д.).

### Пример использования компонента Filters:

```jsx
import Filters from './components/Filters';

const filterOptions = ['status', 'typeOfActivity', 'taskStatus'];

function MyPage() {
    return (
        <div>
            <Filters
                elementCount={100}
                filterOptions={filterOptions}
                showElements={true}
                withDate={true}
                sortBy="Дата"
            />
        {/* Контент страницы */}
        </div>
    );
}
```

## Важные моменты:

1. **Фильтрация по дате**:  
   В компоненте есть радиокнопки для фильтрации по датам: "Все", "Последний месяц", "Последний год". Также есть поля для ввода начальной и конечной даты.

2. **Динамическое обновление фильтров**:  
   При изменении значений фильтров (например, выбор статуса или типа активности), фильтры автоматически обновляются в контексте через функции `updateFilter` и `updateDateFilter`.

3. **Использование фильтров**:  
   Компонент использует различные компоненты выбора (например, **StatusFilter**, **TypeOfActivityFilter**) для отображения доступных фильтров. Каждый фильтр отображается только в случае его упоминания в `filterOptions`.

4. **Выбор пользователя**:  
   Если свойство `userSelect` установлено в `true`, компонент будет отображать фильтр для выбора пользователя (например, **TaskUsers**).

5. **Сортировка**:  
   Компонент отображает текущую сортировку через свойство `sortBy` и предоставляет возможность пользователю видеть, по какому параметру данные отсортированы.

## Зависимости:

- **Material UI**: используется для создания элементов пользовательского интерфейса (например, радиокнопок и полей ввода).
- **React**: используется для управления состоянием и рендеринга компонента.
- **Custom Context**: используется контекст **FilterContext** для управления состоянием фильтров.

---

Этот контекст и компонент фильтров позволяют гибко управлять фильтрацией данных на страницах с таблицами, обеспечивая мощную и настраиваемую систему для фильтрации и сортировки данных.
